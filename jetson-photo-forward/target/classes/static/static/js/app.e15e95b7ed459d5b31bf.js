webpackJsonp([1],{NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=o("VU/8")({name:"App"},a,!1,function(e){o("gsu9")},null,null).exports,s=o("/ocq"),c={data:function(){return{fileList:[],filename:""}},mounted:function(){},methods:{submitUpload:function(){this.$refs.upload.submit(),this.connectWebsocket()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},connectWebsocket:function(){var e=this,t=this,o=void 0;if("undefined"!=typeof WebSocket){var n="ws";"https:"==window.location.protocol&&(n="wss"),(o=new WebSocket(n+"://localhost:8081/websocket/user")).onopen=function(){o.send("发送数据"),console.log("websocket发送数据中")},o.onmessage=function(o){t.filename=o.data,console.log("websocket返回的数据：",o),e.axios.get("/cartoonDownload",{params:{filename:t.filename},responseType:"blob"}).then(function(e){console.log(e);var t=e.data,o=new FileReader;o.readAsDataURL(t),o.onload=function(e){var t=new Image;t.src=e.target.result,document.body.appendChild(t)}}).catch(function(e){console.log(e)})},o.onerror=function(e){console.log("websocket错误：",e)},o.onclose=function(e){console.log("websocket关闭：",e)}}else console.log("您的浏览器不支持WebSocket")}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"http://localhost:8081/photoUpload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"auto-upload":!1}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)},staticRenderFns:[]};var r=o("VU/8")(c,i,!1,function(e){o("WvVt")},null,null).exports;n.default.use(s.a);var u=new s.a({routes:[{path:"/",name:"PhotoUpload",component:r}]}),p=o("mtWM"),d=o("aLYK"),f=o("zL8q"),v=o.n(f);o("tvR6");p.a.defaults.baseURL="http://localhost:8081",n.default.use(d.a,p.a),n.default.use(v.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:u,components:{App:l},template:"<App/>"})},WvVt:function(e,t){},gsu9:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e15e95b7ed459d5b31bf.js.map